
  /$$$$$$   /$$$$$$  /$$$$$$$$       /$$$$$$$                                        
 /$$__  $$ /$$__  $$| $$_____/      | $$__  $$                                       
| $$  \__/| $$  \ $$| $$            | $$  \ $$  /$$$$$$  /$$    /$$/$$$$$$   /$$$$$$ 
| $$      | $$$$$$$$| $$$$$         | $$$$$$$/ /$$__  $$|  $$  /$$/$$__  $$ /$$__  $$
| $$      | $$__  $$| $$__/         | $$__  $$| $$  \ $$ \  $$/$$/ $$$$$$$$| $$  \__/
| $$    $$| $$  | $$| $$            | $$  \ $$| $$  | $$  \  $$$/| $$_____/| $$      
|  $$$$$$/| $$  | $$| $$            | $$  | $$|  $$$$$$/   \  $/ |  $$$$$$$| $$      
 \______/ |__/  |__/|__/            |__/  |__/ \______/     \_/   \_______/|__/      
                                                                                     
                                                                                                                                                           
              version: aztfmod/rover:2009.0210


mode                          : 'launchpad'
terraform command output file : ''
tf_action                     : 'plan'
command and parameters        : ''
level (current)               : 'level0'
environment                   : 'sandpit'
workspace                     : 'level0'
tfstate                       : 'launchpad.tfstate'

@calling process_actions
@calling verify_azure_session
Checking existing Azure session
@calling verify_parameters
landingzone                   : '/tf/caf/landingzones/launchpad'
@calling get_storage_id

launchpad_light already installed

Recover from an un-finished previous execution
@calling initialize_state
Installing launchpad from /tf/caf/landingzones/launchpad
@calling_get_logged_user_object_id
 - logged in objectId: c4000b0f-4815-4128-a38c-1d9a7cbfe9eb (dynadevtest001@dynadevtest001.onmicrosoft.com)
Initializing state with user: dynadevtest001@dynadevtest001.onmicrosoft.com
[0m[1mUpgrading modules...[0m
Downloading aztfmod/caf-aad-apps/azuread 1.0.0 for azure_applications...
- azure_applications in /home/vscode/.terraform.cache/modules/azure_applications
Downloading aztfmod/caf-custom-role/azurerm 1.0.0 for custom_role_definition...
- custom_role_definition in /home/vscode/.terraform.cache/modules/custom_role_definition
Downloading aztfmod/caf-diagnostics-logging/azurerm 2.1.0 for diagnostics...
- diagnostics in /home/vscode/.terraform.cache/modules/diagnostics
Downloading aztfmod/caf-log-analytics/azurerm 2.3.0 for log_analytics...
- log_analytics in /home/vscode/.terraform.cache/modules/log_analytics
Downloading aztfmod/caf-virtual-network/azurerm 3.1.0 for virtual_network...
- virtual_network in /home/vscode/.terraform.cache/modules/virtual_network
Downloading aztfmod/caf-diagnostics/azurerm 1.0.0 for virtual_network.diagnostics_vnet...
- virtual_network.diagnostics_vnet in /home/vscode/.terraform.cache/modules/virtual_network.diagnostics_vnet
- virtual_network.nsg in /home/vscode/.terraform.cache/modules/virtual_network/nsg
- virtual_network.special_subnets in /home/vscode/.terraform.cache/modules/virtual_network/subnet
- virtual_network.subnets in /home/vscode/.terraform.cache/modules/virtual_network/subnet
- virtual_network.traffic_analytics in /home/vscode/.terraform.cache/modules/virtual_network/traffic_analytics

[0m[1mInitializing the backend...[0m

[0m[1mInitializing provider plugins...[0m
- Finding hashicorp/null versions matching "~> 2.1.0"...
- Finding aztfmod/azurecaf versions matching "~> 0.4.3"...
- Finding hashicorp/azurerm versions matching "~> 2.25.0"...
- Finding hashicorp/azuread versions matching "~> 0.10.0"...
- Finding hashicorp/random versions matching "~> 2.2.1"...
- Using hashicorp/random v2.2.1 from the shared cache directory
- Using hashicorp/null v2.1.2 from the shared cache directory
- Using aztfmod/azurecaf v0.4.3 from the shared cache directory
- Using hashicorp/azurerm v2.25.0 from the shared cache directory
- Using hashicorp/azuread v0.10.0 from the shared cache directory

[0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
[0m[32m
You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.[0m
Line 219 - Terraform init return code 0
calling plan
@calling plan
running terraform plan with 
 -TF_VAR_workspace: level0
 -state: /home/vscode/.terraform.cache/tfstates/level0/launchpad.tfstate
 -plan:  /home/vscode/.terraform.cache/tfstates/level0/launchpad.tfplan
/tf/caf/landingzones/launchpad
[0m[1mRefreshing Terraform state in-memory prior to plan...[0m
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
[0m
[0m[1mrandom_string.alpha1: Refreshing state... [id=c][0m
[0m[1mrandom_string.prefix: Refreshing state... [id=yykt][0m
[0m[1mazurecaf_naming_convention.keyvault["launchpad"]: Refreshing state... [id=sJn0h2JdYPksFtKc][0m
[0m[1mazurecaf_naming_convention.stg: Refreshing state... [id=fQyaleazUWiudXyp][0m
[0m[1mazurecaf_naming_convention.rg["tfstate"]: Refreshing state... [id=v0XeBwYeqQwO7bd6][0m
[0m[1mmodule.diagnostics.azurecaf_naming_convention.caf_name_st: Refreshing state... [id=beeFEajYfgYNUypB][0m
[0m[1mazurecaf_naming_convention.rg["security"]: Refreshing state... [id=jJawpPY87RTswq9a][0m
[0m[1mazurecaf_naming_convention.rg["gitops"]: Refreshing state... [id=h32s6BB1KpGcOIDE][0m
[0m[1mmodule.log_analytics.azurecaf_naming_convention.caf_name_la: Refreshing state... [id=v2jBzpysKDbYOrT2][0m
[0m[1mmodule.custom_role_definition.data.azurerm_subscription.primary: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c][0m
[0m[1mdata.azurerm_subscription.primary: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c][0m
[0m[1mdata.azurerm_client_config.current: Refreshing state... [id=2020-11-09 21:27:57.0186719 +0000 UTC][0m
[0m[1mmodule.azure_applications.data.azurerm_client_config.current: Refreshing state... [id=2020-11-09 21:27:57.0192125 +0000 UTC][0m
[0m[1mazurerm_resource_group.rg["gitops"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-devops-agents-hW4shU8v][0m
[0m[1mazurerm_resource_group.rg["tfstate"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-tfstates-myCwaYjOSGx0t][0m
[0m[1mazurerm_resource_group.rg["security"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-security-txAMuCXPsbanb][0m
[0m[1mmodule.azure_applications.random_password.aad_apps["caf_launchpad_level0"]: Refreshing state... [id=none][0m
[0m[1mmodule.azure_applications.azurecaf_naming_convention.aad_apps["caf_launchpad_level0"]: Refreshing state... [id=xqkFRNi8AHNgGH0j][0m
[0m[1mmodule.azure_applications.azuread_application.aad_apps["caf_launchpad_level0"]: Refreshing state... [id=10c257f2-b0d7-4b40-8d5d-14a656160da0][0m
[0m[1mazurerm_role_assignment.role1_current_user: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-tfstates-myCwaYjOSGx0t/providers/Microsoft.Authorization/roleAssignments/f73c5fb5-0b7a-2605-1c04-0a861cb6f8a0][0m
[0m[1mmodule.log_analytics.azurerm_log_analytics_workspace.log_analytics: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourcegroups/yykt-rg-launchpad-devops-agents-hw4shu8v/providers/microsoft.operationalinsights/workspaces/cyykt-la-logs-tpkn4ews2l2eb0umlb7an7mws7hnoh0etbtd7gq9lyeye1w0g][0m
[0m[1mazurerm_key_vault.keyvault["launchpad"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-security-txAMuCXPsbanb/providers/Microsoft.KeyVault/vaults/kv-launchpad-nliui9glqxb][0m
[0m[1mazurerm_storage_account.stg: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-tfstates-myCwaYjOSGx0t/providers/Microsoft.Storage/storageAccounts/yyktstlevel0tqsecwvwkjzl][0m
[0m[1mmodule.diagnostics.azurerm_storage_account.log: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-devops-agents-hW4shU8v/providers/Microsoft.Storage/storageAccounts/cyyktstdiaglh5ul9yregoad][0m
[0m[1mazurerm_key_vault_secret.launchpad_mode: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/launchpad-mode/0075cbb863c64f628e01d4eb0a1fc562][0m
[0m[1mazurerm_key_vault_secret.launchpad_name: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/launchpad-secret-prefix/7aa6171682a9455f935721a0e657182f][0m
[0m[1mazurerm_key_vault_secret.launchpad_subscription_id: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/launchpad-subscription-id/84aa995b52394f939951fd44f3579095][0m
[0m[1mazurerm_key_vault_secret.github_pat: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/github-pat/cb53787c95924d358d5bd701f26324df][0m
[0m[1mazurerm_key_vault_secret.launchpad_blob_name: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/launchpad-blob-name/793b6aa79ba34a759875868ed7dd8acd][0m
[0m[1mmodule.log_analytics.azurerm_log_analytics_solution.la_solution["KeyVaultAnalytics"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourcegroups/yykt-rg-launchpad-devops-agents-hW4shU8v/providers/Microsoft.OperationsManagement/solutions/KeyVaultAnalytics(cyykt-la-logs-tPKN4eWs2L2eb0UMlB7An7Mws7HNoh0ETBtD7gQ9lYEYE1W0g)][0m
[0m[1mmodule.azure_applications.azuread_service_principal.aad_apps["caf_launchpad_level0"]: Refreshing state... [id=309aeed4-f994-4471-aa83-c50b6da32156][0m
[0m[1mazurerm_storage_container.launchpad: Refreshing state... [id=https://yyktstlevel0tqsecwvwkjzl.blob.core.windows.net/level0][0m
[0m[1mmodule.azure_applications.azuread_service_principal_password.aad_apps["caf_launchpad_level0"]: Refreshing state... [id=309aeed4-f994-4471-aa83-c50b6da32156/password/781aacf2-b136-1841-e04e-b20bacb53f8c][0m
[0m[1mmodule.azure_applications.azurerm_key_vault_access_policy.policy["caf_launchpad_level0"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/resourceGroups/yykt-rg-launchpad-security-txAMuCXPsbanb/providers/Microsoft.KeyVault/vaults/kv-launchpad-nliui9glqxb/objectId/309aeed4-f994-4471-aa83-c50b6da32156][0m
[0m[1mazurerm_role_assignment.subscription["logged_in_subscription"]: Refreshing state... [id=/subscriptions/dc193031-c177-4ce6-a3a6-54716d0e1c0c/providers/Microsoft.Authorization/roleAssignments/74bd0433-1b9b-afad-880f-24d2859b7472][0m
[0m[1mazurerm_key_vault_secret.launchpad_blob_container: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/launchpad-blob-container/1997aaf7dfd64a088f916d9eb6dbb805][0m
[0m[1mmodule.azure_applications.azurerm_key_vault_secret.aad_app_client_secret["caf_launchpad_level0"]: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/caf-launchpad-level0-client-secret/068f453d3c6a43b39346d59452cb8833][0m
[0m[1mmodule.azure_applications.azurerm_key_vault_secret.aad_app_tenant_id["caf_launchpad_level0"]: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/caf-launchpad-level0-tenant-id/d431b357755c4544a91b5b31e76c3ce0][0m
[0m[1mmodule.azure_applications.azurerm_key_vault_secret.aad_app_client_id["caf_launchpad_level0"]: Refreshing state... [id=https://kv-launchpad-nliui9glqxb.vault.azure.net/secrets/caf-launchpad-level0-client-id/475544c94f4540a5ad444ccfb5e85848][0m

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:

Terraform will perform the following actions:

[0m[1mPlan:[0m 0 to add, 0 to change, 0 to destroy.[0m
[0m
[1mChanges to Outputs:[0m
  [33m~[0m [0m[1m[0mkeyvaults[0m[0m = (sensitive value)[0m

------------------------------------------------------------------------

This plan was saved to: /home/vscode/.terraform.cache/tfstates/level0/launchpad.tfplan

To perform exactly these actions, run the following command to apply:
    terraform apply "/home/vscode/.terraform.cache/tfstates/level0/launchpad.tfplan"

Terraform plan return code: 0
